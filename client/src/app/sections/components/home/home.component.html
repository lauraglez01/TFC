<section id="recommended" class="mt-5 pt-5">
    <div class="container">
      <h2 class="text-center">Bookies' Top Picks</h2>
  
      <div class="carousel-wrapper">
        <!-- Barra de bÃºsqueda -->
        <div class="common-box search-bar mb-4 d-flex align-items-center gap-2">
          <input
            #searchInput
            type="text"
            class="form-control"
            placeholder="Search for a book..."
            (input)="onSearchInput($event)"
          />
          @if (searchInput.value) {
            <button class="btn btn-outline-secondary" (click)="clearSearch(searchInput)">
              &times;
            </button>
          }
        </div>
  
        <!-- Carrusel de libros recomendados -->
        <div id="carouselRec" class="carousel slide common-box" data-bs-ride="carousel">
          @if (isLoading) {
            <div class="loading-overlay">
              <div class="cookie-spinner"></div>
              <p class="loading-text">Loading... Grab a cookie while you wait!</p>
            </div>
          } @else {
            <div class="carousel-indicators">
              @for (book of recommendedBooks; track book.id; let i = $index) {
                <button
                  type="button"
                  data-bs-target="#carouselRec"
                  [attr.data-bs-slide-to]="i"
                  [class.active]="i === 0"
                  [attr.aria-current]="i === 0 ? 'true' : null"
                  [attr.aria-label]="'Slide ' + (i + 1)">
                </button>
              }
            </div>
  
            <div class="carousel-inner">
              @for (book of recommendedBooks; track book.id; let i = $index) {
                <div class="carousel-item" [class.active]="i === 0">
                  <div class="row align-items-center">
                    <div class="col-md-6">
                      <img [src]="book.cover" [alt]="book.title" class="d-block w-100" />
                    </div>
                    <div class="col-md-6">
                      <div class="carousel-content">
                        <h5 class="book-title">{{ book.title }}</h5>
                        <p class="book-description">{{ book.description }}</p>
                        <button class="btn btn-primary" [routerLink]="['/book', book.id]">Read more</button>
                      </div>
                    </div>
                  </div>
                </div>
              }
            </div>
  
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselRec" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselRec" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          }
        </div>
  
        <!-- Tarjetas de libros recomendados -->
        <div class="book-cards mt-5">
          <div class="row">
            @for (book of filteredBooks; track book.id) {
              <div class="col-md-4 mb-4">
                <div class="card custom-book-card">
                  <img [src]="book.cover" [alt]="book.title" class="card-img-top" />
                  <div class="card-body">
                    <h5 class="card-title">{{ book.title }}</h5>
                    <h6 class="card-subtitle mb-2 text-muted">{{ book.author }}</h6>
                    <p class="card-text">{{ book.description }}</p>
                    <button class="btn btn-primary" [routerLink]="['/book', book.id]">Read more</button>
                  </div>
                </div>
              </div>
            }
          </div>
        </div>
      </div>
    </div>
  </section>  