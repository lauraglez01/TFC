@if (isLoading) {
<div class="loading-overlay">
  <div class="cookie-spinner"></div>
  <p class="loading-text">Loading... Grab a cookie while you wait!</p>
</div>
} @else if (bookDetails) {
<div class="book-details-container">
  <div class="book-details">
    <img [src]="bookDetails.cover" [alt]="bookDetails.title" class="book-cover" />
    <h1>{{ bookDetails.title }}</h1>
    <h2>By {{ bookDetails.author }}</h2>

    <div class="book-meta">
      <p><strong>Description:</strong></p>
      <p class="description">{{ bookDetails.description }}</p>

      <p><strong>Categories:</strong></p>
      <p class="category">{{ getCategoryNames() }}</p>
    </div>

    <div class="dropdown status-dropdown">
      <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="statusDropdown"
        data-bs-toggle="dropdown" aria-expanded="false">
        {{ selectedStatus || 'Select status' }}
      </button>
      <ul class="dropdown-menu" aria-labelledby="statusDropdown">
        <li><a class="dropdown-item" (click)="setStatus('Reading')">ğŸ“– Reading</a></li>
        <li><a class="dropdown-item" (click)="setStatus('Planned')">ğŸ“ Planned</a></li>
        <li><a class="dropdown-item" (click)="setStatus('On Hold')">â¸ï¸ On Hold</a></li>
        <li><a class="dropdown-item" (click)="setStatus('Dropped')">âŒ Dropped</a></li>
        <li><a class="dropdown-item" (click)="setStatus('Completed')">âœ… Completed</a></li>
        <li><a class="dropdown-item" (click)="setStatus('Rereading')">ğŸ” Rereading</a></li>
      </ul>
    </div>

    @if (bookDetails) {
    @let bookId = bookDetails.id;
    <reviews-components-review-list [bookId]="bookId"></reviews-components-review-list>
    }

    @if(isAuthenticated){
    <ng-container>
      <reviews-components-review-form [bookId]="bookDetails.id"></reviews-components-review-form>
    </ng-container>
    }

    <button class="btn back-btn" [routerLink]="['/home']">â† Back to Home</button>
  </div>
</div>
}