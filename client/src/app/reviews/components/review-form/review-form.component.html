<div class="review-form container mt-4">
    <h4>Leave your review!</h4>
  
    <ng-container *ngIf="isAuthenticated; else loginPrompt">
      <form #form="ngForm" (ngSubmit)="submitReview()">
        <div class="mb-3">
          <label for="rating" class="form-label">Rating</label>
          <select
            id="rating"
            name="rating"
            class="form-select"
            required
            [(ngModel)]="rating">
            <option [value]="null" disabled>Select a rating</option>
            @for(cookie of [1,2,3,4,5]; track cookie){
                <option [value]="cookie">
                    {{ cookie }} cookie{{ cookie > 1 ? 's' : '' }}
                </option>
            }
          </select>
        </div>
  
        <div class="mb-3">
          <label for="comment" class="form-label">Comment</label>
          <textarea
            id="comment"
            name="comment"
            class="form-control"
            rows="4"
            maxlength="100"
            [(ngModel)]="comment"
            placeholder="What did you think about this book?">
          </textarea>
        </div>
  
        <button
          class="btn btn-primary"
          type="submit"
          [disabled]="form.invalid || loading">
          {{ loading ? 'Sendingâ€¦' : 'Send review' }}
        </button>
      </form>
    </ng-container>
  
    <ng-template #loginPrompt>
      <p>You need to <a routerLink="/login">log in</a>to leave a review!</p>
    </ng-template>
  </div>
  